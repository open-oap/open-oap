/*! @preserve a11y-dialog 7.3.0 — © Kitty Giraudel */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).A11yDialog=t()}(this,function(){"use strict";var a=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function t(e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=e,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function s(e,t){return e=(t||document).querySelectorAll(e),Array.prototype.slice.call(e)}function i(e){(e.querySelector("[autofocus]")||e).focus()}function e(){s("[data-a11y-dialog]").forEach(function(e){new t(e)})}return t.prototype.create=function(){return this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=s('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(e){e.addEventListener("click",this._show)}.bind(this)),this._closers=s("[data-a11y-dialog-hide]",this.$el).concat(s('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(e){e.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},t.prototype.show=function(e){return this.shown||(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,i(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",e)),this},t.prototype.hide=function(e){return this.shown&&(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",e)),this},t.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(e){e.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(e){e.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},t.prototype.on=function(e,t){return void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t),this},t.prototype.off=function(e,t){t=(this._listeners[e]||[]).indexOf(t);return-1<t&&this._listeners[e].splice(t,1),this},t.prototype._fire=function(e,t){var i=this._listeners[e]||[],e=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(e),i.forEach(function(e){e(this.$el,t)}.bind(this))},t.prototype._bindKeypress=function(e){var t,i;this.$el.contains(document.activeElement)&&(this.shown&&27===e.which&&"alertdialog"!==this.$el.getAttribute("role")&&(e.preventDefault(),this.hide(e)),this.shown&&9===e.which&&(t=this.$el,i=e,e=t,t=s(a.join(","),e).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}),e=t.indexOf(document.activeElement),i.shiftKey&&0===e?(t[t.length-1].focus(),i.preventDefault()):i.shiftKey||e!==t.length-1||(t[0].focus(),i.preventDefault())))},t.prototype._maintainFocus=function(e){!this.shown||e.target.closest('[aria-modal="true"]')||e.target.closest("[data-a11y-dialog-ignore-focus-trap]")||i(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):window.requestAnimationFrame?window.requestAnimationFrame(e):window.setTimeout(e,16)),t}),function(){"use strict";function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e){return e[e.length-1]}function E(t,...e){return e.forEach(e=>{t.includes(e)||t.push(e)}),t}function d(e,t){return e?e.split(t):[]}function c(e,t,i){return(void 0===t||t<=e)&&(void 0===i||e<=i)}function l(e,t,i){return e<t?t:i<e?i:e}function n(e,t,a={},s=0,i=""){i+=`<${Object.keys(a).reduce((e,t)=>{let i=a[t];return"function"==typeof i&&(i=i(s)),`${e} ${t}="${i}"`},e)}></${e}>`;var r=s+1;return r<t?n(e,t,a,r,i):i}function e(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function s(e){return new Date(e).setHours(0,0,0,0)}function m(){return(new Date).setHours(0,0,0,0)}function w(...e){switch(e.length){case 0:return m();case 1:return s(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function u(e,t){const i=new Date(e);return i.setDate(i.getDate()+t)}function h(e,t){const i=new Date(e),a=i.getMonth()+t;let s=a%12;s<0&&(s+=12);t=i.setMonth(a);return i.getMonth()!==s?i.setDate(0):t}function f(e,t){const i=new Date(e),a=i.getMonth(),s=i.setFullYear(i.getFullYear()+t);return 1===a&&2===i.getMonth()?i.setDate(0):s}function r(e,t){return(e-t+7)%7}function p(e,t,i=0){var a=new Date(e).getDay();return u(e,r(t,i)-r(a,i))}function b(e,t){e=new Date(e).getFullYear();return Math.floor(e/t)*t}function L(e,t,i){if(1!==t&&2!==t)return e;const a=new Date(e);return 1===t?i?a.setMonth(a.getMonth()+1,0):a.setDate(1):i?a.setFullYear(a.getFullYear()+1,0,0):a.setMonth(0,1),a.setHours(0,0,0,0)}const D=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,v=/[\s!-/:-@[-`{-~年月日]+/;let i={};const g={y:(e,t)=>new Date(e).setFullYear(parseInt(t,10)),m(t,e,i){const a=new Date(t);let s=parseInt(e,10)-1;if(isNaN(s)){if(!e)return NaN;const t=e.toLowerCase(),a=e=>e.toLowerCase().startsWith(t);if(s=i.monthsShort.findIndex(a),s<0&&(s=i.months.findIndex(a)),s<0)return NaN}return a.setMonth(s),a.getMonth()!==function e(t){return-1<t?t%12:e(t+12)}(s)?a.setDate(0):a.getTime()},d:(e,t)=>new Date(e).setDate(parseInt(t,10))},a={d:e=>e.getDate(),dd:e=>t(e.getDate(),2),D:(e,t)=>t.daysShort[e.getDay()],DD:(e,t)=>t.days[e.getDay()],m:e=>e.getMonth()+1,mm:e=>t(e.getMonth()+1,2),M:(e,t)=>t.monthsShort[e.getMonth()],MM:(e,t)=>t.months[e.getMonth()],y:e=>e.getFullYear(),yy:e=>t(e.getFullYear(),2).slice(-2),yyyy:e=>t(e.getFullYear(),4)};function t(e,t){return e.toString().padStart(t,"0")}function y(e){if("string"!=typeof e)throw new Error("Invalid date format.");if(e in i)return i[e];const r=e.split(D),s=e.match(new RegExp(D,"g"));if(0===r.length||!s)throw new Error("Invalid date format.");const t=s.map(e=>a[e]),n=Object.keys(g).reduce((e,t)=>(s.find(e=>"D"!==e[0]&&e[0].toLowerCase()===t)&&e.push(t),e),[]);return i[e]={parser(e,i){const a=e.split(v).reduce((e,t,i)=>{return 0<t.length&&s[i]&&("M"===(i=s[i][0])?e.m=t:"D"!==i&&(e[i]=t)),e},{});return n.reduce((e,t)=>{t=g[t](e,a[t],i);return isNaN(t)?e:t},m())},formatter:(a,s)=>t.reduce((e,t,i)=>e+`${r[i]}${t(a,s)}`,"")+o(r)}}function k(e,t,i){if(e instanceof Date||"number"==typeof e){const t=s(e);return isNaN(t)?void 0:t}if(e){if("today"===e)return m();if(t&&t.toValue){var a=t.toValue(e,t,i);return isNaN(a)?void 0:s(a)}return y(t).parser(e,i)}}function S(e,t,i){if(isNaN(e)||!e&&0!==e)return"";e="number"==typeof e?new Date(e):e;return t.toDisplay?t.toDisplay(e,t,i):y(t).formatter(e,i)}const x=document.createRange();function A(e){return x.createContextualFragment(e)}function M(e){return e.parentElement||(e.parentNode instanceof ShadowRoot?e.parentNode.host:void 0)}function T(e){return e.getRootNode().activeElement===e}function O(e){"none"!==e.style.display&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function C(e){"none"===e.style.display&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function I(e){e.firstChild&&(e.removeChild(e.firstChild),I(e))}const N=new WeakMap,{addEventListener:B,removeEventListener:F}=EventTarget.prototype;function V(e,t){let i=N.get(e);i||(i=[],N.set(e,i)),t.forEach(e=>{B.call(...e),i.push(e)})}function R(e){let t=N.get(e);t&&(t.forEach(e=>{F.call(...e)}),N.delete(e))}if(!Event.prototype.composedPath){const _=(e,t=[])=>{let i;return t.push(e),e.parentNode?i=e.parentNode:e.host?i=e.host:e.defaultView&&(i=e.defaultView),i?_(i,t):t};Event.prototype.composedPath=function(){return _(this.target)}}function q(e,t){var i="function"==typeof t?t:e=>e instanceof Element&&e.matches(t);return function e(t,i,a){var[s,...t]=t;return i(s)?s:s!==a&&"HTML"!==s.tagName&&0!==t.length?e(t,i,a):void 0}(e.composedPath(),i,e.currentTarget)}const H={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},P={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"»",orientation:"auto",pickLevel:0,prevArrow:"«",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},{language:Y,format:W,weekStart:$}=P;function J(e,t){return e.length<6&&0<=t&&t<7?E(e,t):e}function G(e){return(e+6)%7}function K(e,t,i,a){i=k(e,t,i);return void 0!==i?i:a}function U(e,t,i=3){e=parseInt(e,10);return 0<=e&&e<=i?e:t}function j(t,e){const i=Object.assign({},t),a={},s=e.constructor.locales,r=e.rangeSideIndex;let{format:n,language:o,locale:l,maxDate:d,maxView:c,minDate:u,pickLevel:h,startView:f,weekStart:p}=e.config||{};if(i.language){let e;if(i.language!==o&&(s[i.language]?e=i.language:(e=i.language.split("-")[0],void 0===s[e]&&(e=!1))),delete i.language,e){o=a.language=e;const t=l||s[Y];l=Object.assign({format:W,weekStart:$},s[Y]),o!==Y&&Object.assign(l,s[o]),a.locale=l,n===t.format&&(n=a.format=l.format),p===t.weekStart&&(p=a.weekStart=l.weekStart,a.weekEnd=G(l.weekStart))}}if(i.format){const _="function"==typeof i.format.toDisplay,t="function"==typeof i.format.toValue,E=D.test(i.format);(_&&t||E)&&(n=a.format=i.format),delete i.format}let m=h;void 0!==i.pickLevel&&(m=U(i.pickLevel,2),delete i.pickLevel),m!==h&&(m>h&&(void 0===i.minDate&&(i.minDate=u),void 0===i.maxDate&&(i.maxDate=d)),i.datesDisabled||(i.datesDisabled=[]),h=a.pickLevel=m);let b=u,v=d;if(void 0!==i.minDate){const _=w(0,0,1);b=null===i.minDate?_:K(i.minDate,n,l,b),b!==_&&(b=L(b,h,!1)),delete i.minDate}if(void 0!==i.maxDate&&(v=null===i.maxDate?void 0:K(i.maxDate,n,l,v),void 0!==v&&(v=L(v,h,!0)),delete i.maxDate),v<b?(u=a.minDate=v,d=a.maxDate=b):(u!==b&&(u=a.minDate=b),d!==v&&(d=a.maxDate=v)),i.datesDisabled&&(a.datesDisabled=i.datesDisabled.reduce((e,t)=>{t=k(t,n,l);return void 0!==t?E(e,L(t,h,r)):e},[]),delete i.datesDisabled),void 0!==i.defaultViewDate){const _=k(i.defaultViewDate,n,l);void 0!==_&&(a.defaultViewDate=_),delete i.defaultViewDate}if(void 0!==i.weekStart){const _=Number(i.weekStart)%7;isNaN(_)||(p=a.weekStart=_,a.weekEnd=G(_)),delete i.weekStart}if(i.daysOfWeekDisabled&&(a.daysOfWeekDisabled=i.daysOfWeekDisabled.reduce(J,[]),delete i.daysOfWeekDisabled),i.daysOfWeekHighlighted&&(a.daysOfWeekHighlighted=i.daysOfWeekHighlighted.reduce(J,[]),delete i.daysOfWeekHighlighted),void 0!==i.maxNumberOfDates){const _=parseInt(i.maxNumberOfDates,10);0<=_&&(a.maxNumberOfDates=_,a.multidate=1!==_),delete i.maxNumberOfDates}i.dateDelimiter&&(a.dateDelimiter=String(i.dateDelimiter),delete i.dateDelimiter);let g=c;void 0!==i.maxView&&(g=U(i.maxView,c),delete i.maxView),g=h>g?h:g,g!==c&&(c=a.maxView=g);let y=f;if(void 0!==i.startView&&(y=U(i.startView,y),delete i.startView),y<h?y=h:y>c&&(y=c),y!==f&&(a.startView=y),i.prevArrow){const _=A(i.prevArrow);0<_.childNodes.length&&(a.prevArrow=_.childNodes),delete i.prevArrow}if(i.nextArrow){const _=A(i.nextArrow);0<_.childNodes.length&&(a.nextArrow=_.childNodes),delete i.nextArrow}if(void 0!==i.disableTouchKeyboard&&(a.disableTouchKeyboard="ontouchstart"in document&&!!i.disableTouchKeyboard,delete i.disableTouchKeyboard),i.orientation){const _=i.orientation.toLowerCase().split(/\s+/g);a.orientation={x:_.find(e=>"left"===e||"right"===e)||"auto",y:_.find(e=>"top"===e||"bottom"===e)||"auto"},delete i.orientation}if(void 0!==i.todayBtnMode){switch(i.todayBtnMode){case 0:case 1:a.todayBtnMode=i.todayBtnMode}delete i.todayBtnMode}return Object.keys(i).forEach(e=>{void 0!==i[e]&&_(P,e)&&(a[e]=i[e])}),a}const X=e('<div class="datepicker">\n  <div class="datepicker-picker">\n    <div class="datepicker-header">\n      <div class="datepicker-title"></div>\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% prev-btn"></button>\n        <button type="button" class="%buttonClass% view-switch"></button>\n        <button type="button" class="%buttonClass% next-btn"></button>\n      </div>\n    </div>\n    <div class="datepicker-main"></div>\n    <div class="datepicker-footer">\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% today-btn"></button>\n        <button type="button" class="%buttonClass% clear-btn"></button>\n      </div>\n    </div>\n  </div>\n</div>'),z=e(`<div class="days">\n  <div class="days-of-week">${n("span",7,{class:"dow"})}</div>\n  <div class="datepicker-grid">${n("span",42)}</div>\n</div>`),Z=e(`<div class="calendar-weeks">\n  <div class="days-of-week"><span class="dow"></span></div>\n  <div class="weeks">${n("span",6,{class:"week"})}</div>\n</div>`);class Q{constructor(e,t){Object.assign(this,t,{picker:e,element:A('<div class="datepicker-view"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(e){void 0!==e.pickLevel&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}performBeforeHook(e,t,i){let a=this.beforeShow(new Date(i));switch(typeof a){case"boolean":a={enabled:a};break;case"string":a={classes:a}}if(a){if(!1===a.enabled&&(e.classList.add("disabled"),E(this.disabled,t)),a.classes){const i=a.classes.split(/\s+/);e.classList.add(...i),i.includes("disabled")&&E(this.disabled,t)}a.content&&(s=e,e=a.content,I(s),e instanceof DocumentFragment?s.appendChild(e):"string"==typeof e?s.appendChild(A(e)):"function"==typeof e.forEach&&e.forEach(e=>{s.appendChild(e)}))}var s}}class ee extends Q{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const e=A(z).firstChild;this.dow=e.firstChild,this.grid=e.lastChild,this.element.appendChild(e)}super.init(e)}setOptions(e){let t;if(_(e,"minDate")&&(this.minDate=e.minDate),_(e,"maxDate")&&(this.maxDate=e.maxDate),e.datesDisabled&&(this.datesDisabled=e.datesDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),void 0!==e.todayHighlight&&(this.todayHighlight=e.todayHighlight),void 0!==e.weekStart&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){const _=this.locale=e.locale;this.dayNames=_.daysMin,this.switchLabelFormat=_.titleFormat,t=!0}if(void 0!==e.beforeShowDay&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),void 0!==e.calendarWeeks)if(e.calendarWeeks&&!this.calendarWeeks){const _=A(Z).firstChild;this.calendarWeeks={element:_,dow:_.firstChild,weeks:_.lastChild},this.element.insertBefore(_,this.element.firstChild)}else this.calendarWeeks&&!e.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);void 0!==e.showDaysOfWeek&&(e.showDaysOfWeek?(C(this.dow),this.calendarWeeks&&C(this.calendarWeeks.dow)):(O(this.dow),this.calendarWeeks&&O(this.calendarWeeks.dow))),t&&Array.from(this.dow.children).forEach((e,t)=>{t=(this.weekStart+t)%7;e.textContent=this.dayNames[t],e.className=this.daysOfWeekDisabled.includes(t)?"dow disabled":"dow"})}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),i=e.getMonth(),a=w(t,i,1),s=p(a,this.weekStart,this.weekStart);this.first=a,this.last=w(t,i+1,0),this.start=s,this.focused=this.picker.viewDate}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?m():void 0,this.disabled=[...this.datesDisabled];const i=S(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(i),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const i=p(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((e,t)=>{e.textContent=(e=p(u(i,7*t),4,1),t=p(new Date(e).setMonth(0,4),4,1),Math.round((e-t)/6048e5)+1)})}Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,a=u(this.start,t),s=new Date(a),r=s.getDay();if(e.className=`datepicker-cell ${this.cellClass}`,e.dataset.date=a,e.textContent=s.getDate(),a<this.first?i.add("prev"):a>this.last&&i.add("next"),this.today===a&&i.add("today"),(a<this.minDate||a>this.maxDate||this.disabled.includes(a))&&i.add("disabled"),this.daysOfWeekDisabled.includes(r)&&(i.add("disabled"),E(this.disabled,a)),this.daysOfWeekHighlighted.includes(r)&&i.add("highlighted"),this.range){const[e,t]=this.range;a>e&&a<t&&i.add("range"),a===e&&i.add("range-start"),a===t&&i.add("range-end")}this.selected.includes(a)&&i.add("selected"),a===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,a,a)})}refresh(){const[a,s]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{const t=Number(e.dataset.date),i=e.classList;t>a&&t<s&&i.add("range"),t===a&&i.add("range-start"),t===s&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function te(e,t){if(e&&e[0]&&e[1]){var[[i,a],[s,e]]=e;return t<i||s<t?void 0:[i===t?a:-1,s===t?e:12]}}class ie extends Q{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(A(n("span",12,{"data-month":e=>e})))),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),_(e,"minDate"))if(void 0===e.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{const _=new Date(e.minDate);this.minYear=_.getFullYear(),this.minMonth=_.getMonth(),this.minDate=_.setDate(1)}if(_(e,"maxDate"))if(void 0===e.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const _=new Date(e.maxDate);this.maxYear=_.getFullYear(),this.maxMonth=_.getMonth(),this.maxDate=w(this.maxYear,this.maxMonth+1,0)}this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e.beforeShowMonth&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>{const i=new Date(t),a=i.getFullYear(),s=i.getMonth();return void 0===e[a]?e[a]=[s]:E(e[a],s),e},{}),t&&t.dates&&(this.range=t.dates.map(e=>{const t=new Date(e);return isNaN(t)?void 0:[t.getFullYear(),t.getMonth()]}))}render(){this.disabled=this.datesDisabled.reduce((e,t)=>{const i=new Date(t);return this.year===i.getFullYear()&&e.push(i.getMonth()),e},[]),this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const s=this.selected[this.year]||[],r=this.year<this.minYear||this.year>this.maxYear,n=this.year===this.minYear,o=this.year===this.maxYear,l=te(this.range,this.year);Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,a=w(this.year,t,1);if(e.className=`datepicker-cell ${this.cellClass}`,this.isMinView&&(e.dataset.date=a),e.textContent=this.monthNames[t],(r||n&&t<this.minMonth||o&&t>this.maxMonth||this.disabled.includes(t))&&i.add("disabled"),l){const[s,r]=l;t>s&&t<r&&i.add("range"),t===s&&i.add("range-start"),t===r&&i.add("range-end")}s.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,t,a)})}refresh(){const a=this.selected[this.year]||[],[s,r]=te(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList;t>s&&t<r&&i.add("range"),t===s&&i.add("range-start"),t===r&&i.add("range-end"),a.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}class ae extends Q{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=10*this.step,this.beforeShowOption=`beforeShow${t=this.cellClass,[...t].reduce((e,t,i)=>e+(i?t:t.toUpperCase()),"")}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(A(n("span",12)))),super.init(e)}setOptions(e){if(_(e,"minDate")&&(void 0===e.minDate?this.minYear=this.minDate=void 0:(this.minYear=b(e.minDate,this.step),this.minDate=w(this.minYear,0,1))),_(e,"maxDate")&&(void 0===e.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=b(e.maxDate,this.step),this.maxDate=w(this.maxYear,11,31))),this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e[this.beforeShowOption]){const _=e[this.beforeShowOption];this.beforeShow="function"==typeof _?_:void 0}}updateFocus(){var e=new Date(this.picker.viewDate),t=b(e,this.navStep),i=t+9*this.step;this.first=t,this.last=i,this.start=t-this.step,this.focused=b(e,this.step)}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>E(e,b(t,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(e=>{if(void 0!==e)return b(e,this.step)}))}render(){this.disabled=this.datesDisabled.map(e=>new Date(e).getFullYear()),this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,a=this.start+t*this.step,s=w(a,0,1);if(e.className=`datepicker-cell ${this.cellClass}`,this.isMinView&&(e.dataset.date=s),e.textContent=e.dataset.year=a,0===t?i.add("prev"):11===t&&i.add("next"),(a<this.minYear||a>this.maxYear||this.disabled.includes(a))&&i.add("disabled"),this.range){const[e,t]=this.range;a>e&&a<t&&i.add("range"),a===e&&i.add("range-start"),a===t&&i.add("range-end")}this.selected.includes(a)&&i.add("selected"),a===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,a,s)})}refresh(){const[a,s]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{const t=Number(e.textContent),i=e.classList;t>a&&t<s&&i.add("range"),t===a&&i.add("range-start"),t===s&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function se(e,t){var i={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:i}))}function re(e,t){var{minDate:i,maxDate:a}=e.config,{currentView:s,viewDate:r}=e.picker;let n;switch(s.id){case 0:n=h(r,t);break;case 1:n=f(r,t);break;default:n=f(r,t*s.navStep)}n=l(n,i,a),e.picker.changeFocus(n).render()}function ne(e){var t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function oe(e){e.config.updateOnBlur?e.update({revert:!0}):e.refresh("input"),e.hide()}function le(e,t){const i=q(t,".datepicker-cell");var a;i&&!i.classList.contains("disabled")&&({id:a,isMinView:t}=e.picker.currentView,t?e.setDate(Number(i.dataset.date)):function(e,t){const i=e.picker,a=new Date(i.viewDate),s=i.currentView.id,r=1===s?h(a,t-a.getMonth()):f(a,t-a.getFullYear());i.changeFocus(r).changeView(s-1).render()}(e,Number(1===a?i.dataset.month:i.dataset.year)))}function de(e){e.preventDefault()}const ce=["left","top","right","bottom"].reduce((e,t)=>(e[t]=`datepicker-orient-${t}`,e),{}),ue=e=>e&&`${e}px`;function he(e,t){if(void 0!==t.title&&(t.title?(e.controls.title.textContent=t.title,C(e.controls.title)):(e.controls.title.textContent="",O(e.controls.title))),t.prevArrow){const _=e.controls.prevBtn;I(_),t.prevArrow.forEach(e=>{_.appendChild(e.cloneNode(!0))})}if(t.nextArrow){const _=e.controls.nextBtn;I(_),t.nextArrow.forEach(e=>{_.appendChild(e.cloneNode(!0))})}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),void 0!==t.todayBtn&&(t.todayBtn?C:O)(e.controls.todayBtn),_(t,"minDate")||_(t,"maxDate")){const{minDate:_,maxDate:t}=e.datepicker.config;e.controls.todayBtn.disabled=!c(m(),_,t)}void 0!==t.clearBtn&&(t.clearBtn?C:O)(e.controls.clearBtn)}function fe(e){var{dates:t,config:e}=e;return l(0<t.length?o(t):e.defaultViewDate,e.minDate,e.maxDate)}function pe(e,t){const i=new Date(e.viewDate),a=new Date(t),{id:s,year:r,first:n,last:o}=e.currentView,l=a.getFullYear();switch(e.viewDate=t,l!==i.getFullYear()&&se(e.datepicker,"changeYear"),a.getMonth()!==i.getMonth()&&se(e.datepicker,"changeMonth"),s){case 0:return t<n||o<t;case 1:return l!==r;default:return l<n||o<l}}function me(e){return window.getComputedStyle(e).direction}class be{constructor(e){const t=(this.datepicker=e)["config"],i=X.replace(/%buttonClass%/g,t.buttonClass),a=this.element=A(i).firstChild,[s,r,n]=a.firstChild.children,o=s.firstElementChild,[l,d,c]=s.lastElementChild.children,[u,h]=n.firstChild.children,f={title:o,prevBtn:l,viewSwitch:d,nextBtn:c,todayBtn:u,clearBtn:h};this.main=r,this.controls=f;var p=e.inline?"inline":"dropdown";a.classList.add(`datepicker-${p}`),he(this,t),this.viewDate=fe(e),V(e,[[a,"mousedown",de],[r,"click",le.bind(null,e)],[f.viewSwitch,"click",function(e){ne(e)}.bind(null,e)],[f.prevBtn,"click",function(e){re(e,-1)}.bind(null,e)],[f.nextBtn,"click",function(e){re(e,1)}.bind(null,e)],[f.todayBtn,"click",function(e){const t=e.picker,i=m();if(1===e.config.todayBtnMode){if(e.config.autohide)return void e.setDate(i);e.setDate(i,{render:!1}),t.update()}t.viewDate!==i&&t.changeFocus(i),t.changeView(0).render()}.bind(null,e)],[f.clearBtn,"click",function(e){e.setDate({clear:!0})}.bind(null,e)]]),this.views=[new ee(this),new ie(this),new ae(this,{id:2,name:"years",cellClass:"year",step:1}),new ae(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):e.inputField.after(this.element)}setOptions(t){he(this,t),this.views.forEach(e=>{e.init(t,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(!this.active){const{datepicker:t,element:i}=this;var e;t.inline?i.classList.add("active"):((e=me(t.inputField))!==me(M(i))?i.dir=e:i.dir&&i.removeAttribute("dir"),i.style.visiblity="hidden",i.classList.add("active"),this.place(),i.style.visiblity="",t.config.disableTouchKeyboard&&t.inputField.blur()),this.active=!0,se(t,"show")}}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,se(this.datepicker,"hide"))}place(){const{classList:e,offsetParent:t,style:i}=this.element,{config:a,inputField:s}=this.datepicker,{width:r,height:n}=this.element.getBoundingClientRect(),{left:o,top:l,right:d,bottom:c,width:u,height:h}=s.getBoundingClientRect();let{x:f,y:p}=a.orientation,m=o,b=l;if(t!==document.body&&t){const e=t.getBoundingClientRect();m-=e.left-t.scrollLeft,b-=e.top-t.scrollTop}else m+=window.scrollX,b+=window.scrollY;const v=function e(t){t=M(t);if(t!==document.body&&t)return"visible"!==window.getComputedStyle(t).overflow?t:e(t)}(s);let g=0,y=0,{clientWidth:_,clientHeight:E}=document.documentElement;if(v){const e=v.getBoundingClientRect();0<e.top&&(y=e.top),0<e.left&&(g=e.left),e.right<_&&(_=e.right),e.bottom<E&&(E=e.bottom)}let w=0;"auto"===f&&(o<g?(f="left",w=g-o):o+r>_?(f="right",_<d&&(w=_-d)):f="rtl"!==me(s)||d-r<g?"left":"right"),"right"===f&&(m+=u-r),m+=w,"auto"===p&&(p=l-n>y&&c+n>E?"top":"bottom"),"top"===p?b-=n:b+=h,e.remove(...Object.values(ce)),e.add(ce[f],ce[p]),i.left=ue(m),i.top=ue(b)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){var t=this.currentView,e=this.views[e];return e.id!==t.id&&(this.currentView=e,this._renderMethod="render",se(this.datepicker,"changeView"),this.main.replaceChild(e.element,t.element)),this}changeFocus(e){return this._renderMethod=pe(this,e)?"render":"refreshFocus",this.views.forEach(e=>{e.updateFocus()}),this}update(){var e=fe(this.datepicker);return this._renderMethod=pe(this,e)?"render":"refresh",this.views.forEach(e=>{e.updateFocus(),e.updateSelection()}),this}render(e=!0){e=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[e]()}}function ve(e,t,i,a){const s=e.picker,r=s.currentView,n=r.step||1;let o,l,d=s.viewDate;switch(r.id){case 0:d=a?u(d,7*i):(t.ctrlKey||t.metaKey?f:u)(d,i),o=u,l=e=>r.disabled.includes(e);break;case 1:d=h(d,a?4*i:i),o=h,l=e=>{const t=new Date(e),{year:i,disabled:a}=r;return t.getFullYear()===i&&a.includes(t.getMonth())};break;default:d=f(d,i*(a?4:1)*n),o=f,l=e=>r.disabled.includes(b(e,n))}d=function e(t,i,a,s,r,n){if(c(t,r,n))return s(t)?e(i(t,a),i,a,s,r,n):t}(d,o,i<0?-n:n,l,r.minDate,r.maxDate),void 0!==d&&s.changeFocus(d).render()}function ge(e,t){return e.map(e=>S(e,t.format,t.locale)).join(t.dateDelimiter)}function ye(e,t,i=!1){const{config:a,dates:s,rangeSideIndex:r}=e;if(0===t.length)return i?[]:void 0;let n=t.reduce((e,t)=>{t=k(t,a.format,a.locale);return void 0===t||(!c(t=L(t,a.pickLevel,r),a.minDate,a.maxDate)||e.includes(t)||a.datesDisabled.includes(t)||!(0<a.pickLevel)&&a.daysOfWeekDisabled.includes(new Date(t).getDay())||e.push(t)),e},[]);return 0!==n.length?(a.multidate&&!i&&(n=n.reduce((e,t)=>(s.includes(t)||e.push(t),e),s.filter(e=>!n.includes(e)))),a.maxNumberOfDates&&n.length>a.maxNumberOfDates?n.slice(-1*a.maxNumberOfDates):n):void 0}function _e(e,t=3,i=!0){const{config:a,picker:s,inputField:r}=e;if(2&t){const e=s.active?a.pickLevel:a.startView;s.update().changeView(e).render(i)}1&t&&r&&(r.value=ge(e.dates,a))}function Ee(e,t,i){let{clear:a,render:s,autohide:r,revert:n}=i;void 0===s&&(s=!0),s?void 0===r&&(r=e.config.autohide):r=!1;const o=ye(e,t,a);(o||n)&&(o&&o.toString()!==e.dates.toString()?(e.dates=o,_e(e,s?3:1),se(e,"changeDate")):_e(e,1),r&&e.hide())}class we{constructor(e,t={},i){(e.datepicker=this).element=e;const a=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:m(),maxDate:void 0,minDate:void 0},j(P,this)),s=this.inline="INPUT"!==e.tagName;let r,n;if(s?a.container=e:(t.container&&(a.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container)),r=this.inputField=e,r.classList.add("datepicker-input")),i){const l=i.inputs.indexOf(r),t=i.datepickers;if(l<0||1<l||!Array.isArray(t))throw Error("Invalid rangepicker object.");t[l]=this,Object.defineProperty(this,"rangepicker",{get:()=>i}),Object.defineProperty(this,"rangeSideIndex",{get:()=>l})}this._options=t,Object.assign(a,j(t,this)),s?(n=d(e.dataset.date,a.dateDelimiter),delete e.dataset.date):n=d(r.value,a.dateDelimiter),this.dates=[];e=ye(this,n);e&&0<e.length&&(this.dates=e),r&&(r.value=ge(this.dates,a));const o=this.picker=new be(this);if(s)this.show();else{const l=function(e,t){const{element:i,picker:a}=e;if(a.active||T(i)){const s=a.element;q(t,e=>e===i||e===s)||oe(e)}}.bind(null,this);V(this,[[r,"keydown",function(e,t){var i=t.key;if("Tab"!==i){const a=e.picker,{id:s,isMinView:r}=a.currentView;if(a.active){if(e.editMode)return void("Enter"===i?e.exitEditMode({update:!0,autohide:e.config.autohide}):"Escape"===i&&a.hide());if("ArrowLeft"===i)if(t.ctrlKey||t.metaKey)re(e,-1);else{if(t.shiftKey)return void e.enterEditMode();ve(e,t,-1,!1)}else if("ArrowRight"===i)if(t.ctrlKey||t.metaKey)re(e,1);else{if(t.shiftKey)return void e.enterEditMode();ve(e,t,1,!1)}else if("ArrowUp"===i)if(t.ctrlKey||t.metaKey)ne(e);else{if(t.shiftKey)return void e.enterEditMode();ve(e,t,-1,!0)}else if("ArrowDown"===i){if(t.shiftKey&&!t.ctrlKey&&!t.metaKey)return void e.enterEditMode();ve(e,t,1,!0)}else{if("Enter"!==i)return void("Escape"===i?a.hide():"Backspace"!==i&&"Delete"!==i&&(1!==i.length||t.ctrlKey||t.metaKey)||e.enterEditMode());if(r)return void e.setDate(a.viewDate);a.changeView(s-1).render()}}else{if("ArrowDown"!==i)return void("Enter"===i?e.update():"Escape"===i&&a.show());a.show()}t.preventDefault()}else oe(e)}.bind(null,this)],[r,"focus",function(e){e.config.showOnFocus&&!e._showing&&e.show()}.bind(null,this)],[r,"mousedown",function(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=T(i),i._clicking=setTimeout(()=>{delete i._active,delete i._clicking},2e3))}.bind(null,this)],[r,"click",function(e,t){const i=t.target;i._clicking&&(clearTimeout(i._clicking),delete i._clicking,i._active&&e.enterEditMode(),delete i._active,e.config.showOnClick&&e.show())}.bind(null,this)],[r,"paste",function(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}.bind(null,this)],[document,"mousedown",l],[document,"touchstart",l],[window,"resize",o.place.bind(o)]])}}static formatDate(e,t,i){return S(e,t,i&&H[i]||H.en)}static parseDate(e,t,i){return k(e,t,i&&H[i]||H.en)}static get locales(){return H}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=this.picker,i=j(e,this);Object.assign(this._options,e),Object.assign(this.config,i),t.setOptions(i),_e(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;T(this.inputField)||this.config.disableTouchKeyboard||(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),R(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t){const e=t?e=>S(e,t,this.config.locale):e=>new Date(e);return this.config.multidate?this.dates.map(e):0<this.dates.length?e(this.dates[0]):void 0}setDate(...e){const t=[...e],i={},a=o(e);"object"!=typeof a||Array.isArray(a)||a instanceof Date||!a||Object.assign(i,t.pop()),Ee(this,Array.isArray(t[0])?t[0]:t,i)}update(e){this.inline||(e=Object.assign(e||{},{clear:!0,render:!0}),Ee(this,d(this.inputField.value,this.config.dateDelimiter),e))}refresh(e,t=!1){e&&"string"!=typeof e&&(t=e,e=void 0),_e(this,"picker"===e?2:"input"===e?1:3,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit"))}exitEditMode(e){!this.inline&&this.editMode&&(e=Object.assign({update:!1},e),delete this.editMode,this.inputField.classList.remove("in-edit"),e.update&&this.update(e))}}function Le(e){const t=Object.assign({},e);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function De(e,t,i,a){V(e,[[i,"changeDate",t]]),new we(i,a,e)}function ke(e,t){if(!e._updating){e._updating=!0;t=t.target;if(void 0!==t.datepicker){const i=e.datepickers,a={render:!1},s=e.inputs.indexOf(t),r=0===s?1:0,n=i[s].dates[0],o=i[r].dates[0];void 0!==n&&void 0!==o?0===s&&o<n?(i[0].setDate(o,a),i[1].setDate(n,a)):1===s&&n<o&&(i[0].setDate(n,a),i[1].setDate(o,a)):e.allowOneSidedRange||void 0===n&&void 0===o||(a.clear=!0,i[r].setDate(i[s].dates,a)),i[0].picker.update().render(),i[1].picker.update().render(),delete e._updating}}}window.Datepicker=we,window.DateRangePicker=class{constructor(e,t={}){const i=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){(e.rangepicker=this).element=e,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!t.allowOneSidedRange;const a=ke.bind(null,this),s=Le(t),r=[];Object.defineProperty(this,"datepickers",{get:()=>r}),De(this,a,this.inputs[0],s),De(this,a,this.inputs[1],s),Object.freeze(r),0<r[0].dates.length?ke(this,{target:this.inputs[0]}):0<r[1].dates.length&&ke(this,{target:this.inputs[1]})}}get dates(){return 2===this.datepickers.length?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;e=Le(e);this.datepickers[0].setOptions(e),this.datepickers[1].setOptions(e)}destroy(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),R(this),delete this.element.rangepicker}getDates(t){const i=t?e=>S(e,t,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map(e=>void 0===e?e:i(e))}setDates(e,t){const[i,a]=this.datepickers,s=this.dates;this._updating=!0,i.setDate(e),a.setDate(t),delete this._updating,a.dates[0]!==s[1]?ke(this,{target:this.inputs[1]}):i.dates[0]!==s[0]&&ke(this,{target:this.inputs[0]})}}}(),Datepicker.locales.de={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["So","Mo","Di","Mi","Do","Fr","Sa"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",monthsTitle:"Monate",clear:"Löschen",weekStart:1,format:"dd.mm.yyyy"};"use strict";const MAIN_BLOCK="dual-listbox",CONTAINER_ELEMENT="dual-listbox__container",AVAILABLE_ELEMENT="dual-listbox__available",SELECTED_ELEMENT="dual-listbox__selected",TITLE_ELEMENT="dual-listbox__title",ITEM_ELEMENT="dual-listbox__item",BUTTONS_ELEMENT="dual-listbox__buttons",BUTTON_ELEMENT="dual-listbox__button",SEARCH_ELEMENT="dual-listbox__search",SELECTED_MODIFIER="dual-listbox__item--selected";class DualListbox{constructor(e,t={}){this.setDefaults(),this.selected=[],this.available=[],DualListbox.isDomElement(e)?this.select=e:this.select=document.querySelector(e),this._initOptions(t),this._initReusableElements(),this._splitOptions(this.select.options),void 0!==t.options&&this._splitOptions(t.options),this._buildDualListbox(this.select.parentNode),this._addActions(),this.redraw()}setDefaults(){this.addEvent=null,this.removeEvent=null,this.availableTitle="Available options",this.selectedTitle="Selected options",this.showAddButton=!0,this.addButtonText=window.OAP.labels.JSLABEL_DUALLIST_ADD||"add",this.showRemoveButton=!0,this.removeButtonText=window.OAP.labels.JSLABEL_DUALLIST_REMOVE||"remove",this.showAddAllButton=!0,this.addAllButtonText=window.OAP.labels.JSLABEL_DUALLIST_ADD_ALL||"add all",this.showRemoveAllButton=!0,this.removeAllButtonText=window.OAP.labels.JSLABEL_DUALLIST_REMOVE_ALL||"remove all",this.searchPlaceholder=window.OAP.labels.JSLABEL_DUALLIST_SEARCH||"search"}addEventListener(e,t){this.dualListbox.addEventListener(e,t)}addSelected(t){var e=this.available.indexOf(t);let i=this.dualListbox.nextSibling.nextSibling;-1<e&&(this.available.splice(e,1),this.selected.push(t),this._selectOption(t.dataset.id),this.redraw(),i.style.display="none",setTimeout(()=>{let e=document.createEvent("HTMLEvents");e.initEvent("added",!1,!0),e.addedElement=t,this.dualListbox.dispatchEvent(e)},0))}redraw(){this.updateAvailableListbox(),this.updateSelectedListbox()}removeSelected(t){var e=this.selected.indexOf(t);let i=this.dualListbox.nextSibling.nextSibling;-1<e&&(this.selected.splice(e,1),this.available.push(t),this._deselectOption(t.dataset.id),this.redraw(),i.style.display="block",setTimeout(()=>{let e=document.createEvent("HTMLEvents");e.initEvent("removed",!1,!0),e.removedElement=t,this.dualListbox.dispatchEvent(e)},0)),0===this.selected.length&&(this.select.value="")}searchLists(e,t){var i=t.querySelectorAll(`.${ITEM_ELEMENT}`),a=e.toLowerCase();for(let t=0;t<i.length;t++){let e=i[t];-1===e.textContent.toLowerCase().indexOf(a)?e.style.display="none":e.style.display="list-item"}}updateAvailableListbox(){this._updateListbox(this.availableList,this.available)}updateSelectedListbox(){this._updateListbox(this.selectedList,this.selected)}_actionAllSelected(e){e.preventDefault();let t=this.available.filter(e=>"none"!==e.style.display);t.forEach(e=>this.addSelected(e))}_updateListbox(t,i){for(;t.firstChild;)t.removeChild(t.firstChild);for(let e=0;e<i.length;e++){var a=i[e];t.appendChild(a)}}_actionItemSelected(e){e.preventDefault();e=this.dualListbox.querySelector(`.${SELECTED_MODIFIER}`);e&&this.addSelected(e)}_actionAllDeselected(e){e.preventDefault();let t=this.selected.filter(e=>"none"!==e.style.display);t.forEach(e=>this.removeSelected(e))}_actionItemDeselected(e){e.preventDefault();e=this.dualListbox.querySelector(`.${SELECTED_MODIFIER}`);e&&this.removeSelected(e)}_actionItemDoubleClick(e,t=null){t&&(t.preventDefault(),t.stopPropagation()),-1<this.selected.indexOf(e)?this.removeSelected(e):this.addSelected(e)}_actionItemClick(i,e,t=null){t&&t.preventDefault();var a=e.querySelectorAll(`.${ITEM_ELEMENT}`);for(let t=0;t<a.length;t++){let e=a[t];e!==i&&e.classList.remove(SELECTED_MODIFIER)}i.classList.contains(SELECTED_MODIFIER)?i.classList.remove(SELECTED_MODIFIER):i.classList.add(SELECTED_MODIFIER)}_addActions(){this._addButtonActions(),this._addSearchActions()}_addButtonActions(){this.add_all_button.addEventListener("click",e=>this._actionAllSelected(e)),this.add_button.addEventListener("click",e=>this._actionItemSelected(e)),this.remove_button.addEventListener("click",e=>this._actionItemDeselected(e)),this.remove_all_button.addEventListener("click",e=>this._actionAllDeselected(e))}_addClickActions(t){return t.addEventListener("dblclick",e=>this._actionItemDoubleClick(t,e)),t.addEventListener("click",e=>this._actionItemClick(t,this.dualListbox,e)),t}_addSearchActions(){this.search_left.addEventListener("change",e=>this.searchLists(e.target.value,this.availableList)),this.search_left.addEventListener("keyup",e=>this.searchLists(e.target.value,this.availableList)),this.search_right.addEventListener("change",e=>this.searchLists(e.target.value,this.selectedList)),this.search_right.addEventListener("keyup",e=>this.searchLists(e.target.value,this.selectedList))}_buildDualListbox(e){this.select.style.display="none",this.dualListBoxContainer.appendChild(this._createList(this.search_left,this.availableListTitle,this.availableList)),this.dualListBoxContainer.appendChild(this.buttons),this.dualListBoxContainer.appendChild(this._createList(this.search_right,this.selectedListTitle,this.selectedList)),this.dualListbox.appendChild(this.dualListBoxContainer),e.insertBefore(this.dualListbox,this.select)}_createList(e,t,i){let a=document.createElement("div");return a.appendChild(e),a.appendChild(t),a.appendChild(i),a}_createButtons(){this.buttons=document.createElement("div"),this.buttons.classList.add(BUTTONS_ELEMENT),this.add_all_button=document.createElement("button"),this.add_all_button.innerHTML=this.addAllButtonText,this.add_button=document.createElement("button"),this.add_button.innerHTML=this.addButtonText,this.remove_button=document.createElement("button"),this.remove_button.innerHTML=this.removeButtonText,this.remove_all_button=document.createElement("button"),this.remove_all_button.innerHTML=this.removeAllButtonText;var e,t={showAddAllButton:this.add_all_button,showAddButton:this.add_button,showRemoveButton:this.remove_button,showRemoveAllButton:this.remove_all_button};for(e in t)if(e){var i=this[e];const a=t[e];a.setAttribute("type","button"),a.classList.add(BUTTON_ELEMENT),i&&this.buttons.appendChild(a)}}_createListItem(e){let t=document.createElement("li");return t.classList.add(ITEM_ELEMENT),t.innerHTML=e.text.replace(/\|/g,"<br>"),t.dataset.id=e.value,this._addClickActions(t),t}_createSearchLeft(){this.search_left=document.createElement("input"),this.search_left.classList.add(SEARCH_ELEMENT),this.search_left.placeholder=this.searchPlaceholder}_createSearchRight(){this.search_right=document.createElement("input"),this.search_right.classList.add(SEARCH_ELEMENT),this.search_right.placeholder=this.searchPlaceholder}_deselectOption(i){var a=this.select.options;for(let t=0;t<a.length;t++){let e=a[t];e.value===i&&(e.selected=!1,e.removeAttribute("selected"))}this.removeEvent&&this.removeEvent(i)}_initOptions(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}_initReusableElements(){this.dualListbox=document.createElement("div"),this.dualListbox.classList.add(MAIN_BLOCK),this.select.id&&this.dualListbox.classList.add(this.select.id),this.dualListBoxContainer=document.createElement("div"),this.dualListBoxContainer.classList.add(CONTAINER_ELEMENT),this.availableList=document.createElement("ul"),this.availableList.classList.add(AVAILABLE_ELEMENT),this.selectedList=document.createElement("ul"),this.selectedList.classList.add(SELECTED_ELEMENT),this.availableListTitle=document.createElement("div"),this.availableListTitle.classList.add(TITLE_ELEMENT),this.availableListTitle.innerText=this.availableTitle,this.selectedListTitle=document.createElement("div"),this.selectedListTitle.classList.add(TITLE_ELEMENT),this.selectedListTitle.innerText=this.selectedTitle,this._createButtons(),this._createSearchLeft(),this._createSearchRight()}_selectOption(i){var a=this.select.options;for(let t=0;t<a.length;t++){let e=a[t];e.value===i&&(e.selected=!0,e.setAttribute("selected",""))}this.addEvent&&this.addEvent(i)}_splitOptions(t){for(let e=0;e<t.length;e++){var i=t[e];DualListbox.isDomElement(i)?this._addOption({text:i.innerHTML,value:i.value,selected:i.attributes.selected}):this._addOption(i)}}_addOption(e){var t=this._createListItem(e);(e.selected?this.selected:this.available).push(t)}static isDomElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}}!function(u,i){i.utils=i.utils||{},i.utils.errorList=function(){function t(r,e){const t=r.querySelectorAll('[aria-invalid="true"]');let i=r.querySelector('[role="alert"]'),a=!!i&&i.dataset.completeMessage,n="",s="";t.length<1&&!a||(i||(i=o.createElement("div"),i.setAttribute("role","alert"),r.insertBefore(i,r.firstChild)),e||""===i.innerHTML?(t.forEach(function(a){if(a.id&&""!==a.id){let t=r.querySelector("label[for="+a.id+"]"),i=a.id+"--item",e="";if(t&&t.classList.contains(l.formCheckableLabel)&&(i=t.dataset.legend,t=r.querySelector("legend#"+t.dataset.legend)),!t){let e=a.closest("."+l.formGroup);e&&(t=e.querySelector("label"),i=e.id)}var s;t||(s=a.closest("."+l.formTableCell))&&(e=s.dataset.errorlabel,i=a.id),t&&""===e&&(a=t.textContent.split("*"),e=a[0]),e&&(n+='<li class="'+l.errorListItem+'"><a href="#'+i+'" class="'+l.errorListLink+'">'+e+"</a></li>")}}),s='<ul class="'+l.errorList+'">'+n+"</ul>"):(s=i.innerHTML,c(i)),u.setTimeout(function(){a?i.innerHTML="<div>"+s+"</div>":i.innerHTML='<div class="'+l.errorListBox+'"><p class="'+l.errorListMessage+'"><strong>'+d.JSMSG_ERROR_LABEL+":</strong> "+d.JSMSG_ERROR_MESSAGE+"</p>"+s+"</div>",i.id&&"#jumpmark"!==u.location.hash&&(u.location.hash="#"+i.id)},150))}const o=u.document,l={error:"form__error",errorListBox:"form__error-list-box",errorList:"form__error-list",errorListItem:"form__error-list-item",errorListLink:"form__error-list-link",errorListMessage:"form__error-list-text",alertMessage:"form__alert",formGroup:"form__group",formGroupError:"form__group--error",formTableCell:"form__table-cell",formCheckableLabel:"form__checkable-label"},e={form:".form--proposal"},d=i.labels||{},c=function(e){const t=e.querySelectorAll("."+l.errorListLink);t.forEach(function(e){let t=o.querySelector(e.hash),i;t&&(t.classList.add(l.error),t.setAttribute("aria-invalid","true"),i=t.closest("."+l.formGroup),i&&i.classList.add(l.formGroupError))})};return{show:function(){o.querySelectorAll(e.form).forEach(function(e){t(e)})},update:function(e){t(e,!0)}}}()}(this,this.OAP||{}),function(h,e){e.utils=e.utils||{},e.utils.modal=function(){const s=h.document,e={modal:"oap-modal",modalContent:"oap-modal-content",modalSubmit:"oap-modal-submit",modalCancel:"oap-modal-cancel",loader:"oap-loader"},r={warningAccepted:"warningAccepted"};let n,o,l,d,c,u;return o=s.getElementById(e.modal),l=s.getElementById(e.modalContent),d=s.getElementById(e.modalSubmit),c=s.getElementById(e.modalCancel),u=s.getElementById(e.loader),o&&s.body.appendChild(o),u&&s.body.appendChild(u),{show:function(e,t,i,a){o&&u&&(n&&n.destroy(),n=new h.A11yDialog(o),l&&(l.innerHTML=e),c&&(c.innerHTML=i),d&&(d.innerHTML=t),d&&(d.addEventListener("click",function(){a.dataset[r.warningAccepted]=1,n.hide(),s.activeElement.click(),u.style.display="flex"}),d.removeAttribute("disabled")),n.show())}}}()}(this,this.OAP||{}),function(e){e.utils=e.utils||{},e.utils.formatNumber=function(){const a={maximumFractionDigits:2,minimumFractionDigits:0},s={maximumFractionDigits:2,minimumFractionDigits:2};return{format:function(e){var t=Math.floor(e),i=e-t;return e=e&&!isNaN(t)?(0<i?new Intl.NumberFormat("de-DE",s):new Intl.NumberFormat("de-DE",a)).format(e):e}}}()}(this.OAP||{}),function(e,t){const a=e.document,i={countableAreas:"textarea[data-oap-maxlength]"},s={counterBox:"counter",countCurrent:"counter-current",maxedOut:"js-counter-max"},r={maxlength:"oapMaxlength"};const n=(t.labels||{}).JSMSG_CHARACTERS_REMAINING,o=function(e){let t=a.createElement("div");var i;return e.id&&""!==e.id&&(i=e.id+"-counter",t.id=i,e.setAttribute("aria-describedby",i)),t.innerHTML=n.replace("%s",'<span class="'+s.countCurrent+'"></span>'),t.classList.add(s.counterBox),e.parentNode.appendChild(t),{wrapper:t,countCurrent:t.querySelector("."+s.countCurrent)}},l=function(e,t){var i=[...e.value.replace(/[\n\r\t]/g,"")].length;t.countCurrent.innerText=e.dataset[r.maxlength]-i,i>=e.dataset[r.maxlength]?t.wrapper.classList.add(s.maxedOut):t.wrapper.classList.remove(s.maxedOut)};a.querySelectorAll(i.countableAreas).forEach(function(e){!function(e){const t=o(e);e.addEventListener("keyup",function(){l(e,t)}),l(e,t)}(e)})}(this,this.OAP||{}),function(e){const t=e.document,i={submitAccepted:".submit_accepted",submitButton:"#submit-proposal"};let a=!1,s=!1;s=t.querySelectorAll(i.submitAccepted),s.forEach(function(e){e.addEventListener("change",function(){a=!0,s.forEach(function(e){a=a&&e.checked}),t.querySelector(i.submitButton).disabled=!a})})}(this),function(e,E){const w=e.document,L={validatableFormFields:"[data-oap-validat]",serverErrorList:"[data-oap-servererror]",enableDisabledElements:"[type=checkbox][disabled], [type=radiobutton][disabled], select[disabled]",additionalInput:{textfield:".form__textfield--additional",textarea:".form__textarea--additional"}},D={pseudoFileInput:"form__upload-value",additionalTextarea:"form__textarea--additional",errorMessage:"error-message",errorMessageLabel:"form__label-question--error",errorMessageItem:"error-message__item"},k={validate:"oapValidat",type:"oapType",maxlength:"oapMaxlength",minvalue:"oapMinvalue",maxvalue:"oapMaxvalue",greaterthanItem:"oapGreaterthanItem",greaterthanTriggers:"oapGreaterthanTriggers",greaterthanCarryover:"oapGreaterthanCarryover",lessthanItem:"oapLessthanItem",lessthanTriggers:"oapLessthanTriggers",lessthanCarryover:"oapLessthanCarryover",warningAccepted:"warningAccepted",showAlwaysModal:"oapShowmodal",modalText:"oapModaltext",modalSubmit:"oapModalsubmit",modalCancel:"oapModalcancel",serverError:"oapServererror",uploadresult:"oapUploadvalidation"},t={loader:"oap-loader"},n={loaderVisible:"flex"},S=E.labels||{},i="oap-proposal-",o=",",s='<svg class="form__icon form__icon--error" width="20" height="22" focusable="false" aria-hidden="true"> <use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-error" x="0" y="0"/> </svg>';let x=new RegExp("oap-input-([0-9-]*?)--a-error"),l=!1,a=0,d=[],c=[],A={},u;function M(e){return!!e&&(e=e.toString().replace(/^(.{2})\.(.{2})\.(.{4})$/,"$3-$2-$1"),Date.parse(e))}function T(e,t,i,a){a&&Object.entries(a).forEach(function(e){t=t.replace(e[0],e[1])}),e.innerHTML+='<span class="'+D.errorMessageItem+'">'+s+t+"</span>",i.setAttribute("aria-invalid","true"),i.labelElement&&i.labelElement.classList.add(D.errorMessageLabel)}const h=function(v,g,e,y){let _={critical:!0,relaxed:!0};return v.removeAttribute("aria-invalid"),v.labelElement&&v.labelElement.classList.remove(D.errorMessageLabel),y.innerHTML="",e.forEach(function(e){"file"!==v.type&&"select-multiple"!==v.type&&(v.value=v.value.toString().trim());var i=v.value&&""!==v.value,a=!isNaN(Number(v.value));switch(e){case"VALIDATOR_MANDATORY":{let a=!0;switch(v.type){case"checkbox":case"radio":var t=w.querySelector("#"+v.id).closest(".form__group").querySelector(":scope legend").id;if(void 0===A[t]){const d=w.querySelector("#"+v.id).closest(".form__checkable-group").querySelectorAll("input.form__checkable");"radio"===v.type&&d.forEach(function(e){var t=e.getAttribute("aria-describedby");let i=t?w.getElementById(t):null;e.removeAttribute("aria-invalid"),i&&(i.innerHTML="")}),a=!1,d.forEach(function(e){e.checked&&(a=!0)});const c=w.querySelector("#"+v.id).closest(".form__checkable-group").querySelector(L.additionalInput.textfield+","+L.additionalInput.textarea);if(c){var s=c.getAttribute("aria-describedby"),s=x.exec(s);if(s){const u=w.querySelector("#"+s[0]);a&&(u.innerHTML="")}}A[t]=a}break;case"hidden":v.classList.contains(D.pseudoFileInput)&&(v.value&&""!==v.value||(a=!1));break;case"file":a=!0;break;case"textarea":if(v.classList.contains(D.additionalTextarea)){t=w.querySelector("#"+v.id).closest(".form__group").querySelector(":scope legend").id;const h=w.querySelector("#"+v.id).closest(".form__checkable-group").querySelectorAll("input.form__checkable");let i=-1;v.labelElement=w.querySelector("#"+t),h.forEach(function(e,t){e.checked&&(a=!0,i=t)}),y.innerHTML="",i+1!==h.length||v.value&&""!==v.value||(T(y,S.JSMSG_MANDATORY,v),_.relaxed=!1,a=!0)}else v.value&&""!==v.value||(a=!1);break;default:v.value&&""!==v.value||(a=!1)}a||(T(y,S.JSMSG_MANDATORY,v),_.relaxed=!1);break}case"VALIDATOR_MAXCHAR":v.dataset[k.maxlength]-[...v.value.replace(/[\n\r\t]/g,"")].length<0&&(T(y,S.JSMSG_MAX_LEN_EXCEEDED,v),_.critical=!1);break;case"VALIDATOR_INTEGER":i&&!Number.isInteger(Number(v.value.toString().replace(/\./g,"").replace(/,/g,".")))&&(T(y,S.JSMSG_NO_INTEGER,v),_.critical=!1);break;case"VALIDATOR_FLOAT":i&&!Number.isFinite(Number(v.value.toString().replace(/\./g,"").replace(/,/g,".")))&&(T(y,S.JSMSG_NO_FLOAT,v),_.critical=!1);break;case"VALIDATOR_MINVALUE":if(!i)break;switch(g){case"TYPE_DATE1":case"TYPE_DATE2":M(v.value)<M(v.dataset[k.minvalue])&&(_.critical=!1);break;case"TYPE_UPLOAD":v.classList.contains(D.pseudoFileInput)&&""!==v.value&&v.value.split(",").length<v.dataset[k.minvalue]&&(_.critical=!0,T(y,S.JSMSG_MIN_VALUE,v,{"%d":v.dataset[k.minvalue]}));break;default:var r=v.value.toString().replace(/\./g,"").replace(/,/g,".");(!a||Number(r)<v.dataset[k.minvalue])&&(_.critical=!1)}if(!_.critical){let e=v.dataset[k.minvalue];E.utils&&E.utils.formatNumber&&(e=E.utils.formatNumber.format(v.dataset[k.minvalue])),T(y,S.JSMSG_MIN_VALUE,v,{"%d":e})}break;case"VALIDATOR_MAXVALUE":switch(g){case"TYPE_DATE1":case"TYPE_DATE2":var n=M(v.value);M(v.dataset[k.maxvalue])<n&&(_.critical=!1);break;case"TYPE_UPLOAD":v.classList.contains(D.pseudoFileInput)&&""!==v.value&&v.value.split(",").length>v.dataset[k.maxvalue]&&(_.critical=!1);break;default:n=v.value.toString().replace(/\./g,"").replace(/,/g,".");(!a||Number(n)>v.dataset[k.maxvalue])&&(_.critical=!1)}if(!_.critical){let e=v.dataset[k.maxvalue];E.utils&&E.utils.formatNumber&&(e=E.utils.formatNumber.format(e)),T(y,S.JSMSG_MAX_VALUE,v,{"%d":e})}break;case"VALIDATOR_EMAIL":i&&!/^\S+@\S+\.\S+$/.test(v.value)&&(T(y,S.JSMSG_INVALID_EMAIL,v),_.critical=!1);break;case"VALIDATOR_PHONE":i&&!/^[0-9\s()+-]*$/.test(v.value)&&(T(y,S.JSMSG_INVALID_PHONE,v),_.critical=!1);break;case"VALIDATOR_FILE":if("file"!==v.type){let e=v.dataset[k.uploadresult];e.includes("size")&&(T(y,S.JSMSG_UPLOAD_ERROR_FILE_SIZE_SIMPLE,v),_.critical=!1),e.includes("max")&&(T(y,S.JSMSG_UPLOAD_MAX_FILES_REACHED,v),_.critical=!1),e.includes("min")&&(T(y,S.JSMSG_UPLOAD_MIN_FILES_REACHED,v),_.critical=!1)}break;case"VALIDATOR_GREATERTHAN":{if(void 0!==v.dataset[k.greaterthanTriggers]){for(const f of w.querySelectorAll(v.dataset[k.greaterthanTriggers]))f.dispatchEvent(new Event("blur"));break}let t,e=!0;if(void 0!==v.dataset[k.greaterthanItem]){const p=w.querySelector(v.dataset[k.greaterthanItem]);t=Number(p.value.toString().replace(/\./g,"").replace(/,/g,"."))}else void 0!==v.dataset[k.greaterthanCarryover]&&(t=Number(v.dataset[k.greaterthanCarryover]));switch(g){case"TYPE_DATE1":case"TYPE_DATE2":break;default:var o=Number(v.value.toString().replace(/\./g,"").replace(/,/g,"."));i&&(!a||o<t)&&(e=!1)}if(!e){let e=t;E.utils&&E.utils.formatNumber&&(e=E.utils.formatNumber.format(e)),T(y,S.JSMSG_MIN_VALUE,v,{"%d":e})}break}case"VALIDATOR_LESSTHAN":{if(void 0!==v.dataset[k.lessthanTriggers]){for(const m of w.querySelectorAll(v.dataset[k.lessthanTriggers]))m.dispatchEvent(new Event("blur"));break}let t,e=!0;if(void 0!==v.dataset[k.lessthanItem]){const b=w.querySelector(v.dataset[k.lessthanItem]);t=Number(b.value.toString().replace(/\./g,"").replace(/,/g,"."))}else void 0!==v.dataset[k.lessthanCarryover]&&(t=Number(v.dataset[k.lessthanCarryover]));switch(g){case"TYPE_DATE1":case"TYPE_DATE2":break;default:var l=Number(v.value.toString().replace(/\./g,"").replace(/,/g,"."));i&&(!a||l>t)&&(e=!1)}if(!e){let e=t;E.utils&&E.utils.formatNumber&&(e=E.utils.formatNumber.format(e)),T(y,S.JSMSG_MAX_VALUE,v,{"%d":e})}break}}}),_},f=function(e,t){let i=w.createElement("div");var a,s;return i.classList.add(D.errorMessage),t.id&&""!==t.id&&(a=t.getAttribute("aria-describedby"),s=t.id+"-error",i.id=s,t.setAttribute("aria-describedby",(a?a+" ":"")+s)),e.appendChild(i),i},p=function(e){return e.id||(a+=1,e.id=i+a,i+a)};var r;(r=w.querySelector(L.serverErrorList))&&(l=r.dataset[k.serverError],w.querySelectorAll(L.validatableFormFields).forEach(function(e){!function(e){const t=e.dataset[k.type];var i=e.dataset[k.validate].split(o);const a=[...new Set(i)];let s=e.closest("label")||e.parentNode;"TYPE_CHECKBOX"!==t&&"TYPE_RADIOBUTTON"!==t||(s=e.closest(".form__checkable-group"),e.addEventListener("change",function(){A={},h(e,t,a,r)}));const r=f(s,e);i=e.closest("form");i&&c.push(p(i)),e.labelElement=w.querySelector('[for="'+e.id+'"]'),"TYPE_CHECKBOX"!==t&&"TYPE_RADIOBUTTON"!==t||(e.labelElement=w.querySelector("#"+e.labelElement.dataset.legend)),e.addEventListener("blur",function(){A={},h(e,t,a,r)}),"0"!==l&&h(e,t,a,r),d.push({formField:e,validators:a,messageBox:r,formId:i.id,type:t})}(e)}),E.utils&&E.utils.errorList&&E.utils.errorList.show(),w.querySelectorAll("form").forEach(function(e){var r;c.includes(e.id)&&(r=e).addEventListener("submit",function(e){if(w.activeElement&&w.activeElement.classList.contains("datepicker-input"))e.preventDefault();else{let t={critical:!0,relaxed:!0};if(d.forEach(function(e){e.formId&&((e=h(e.formField,e.type,e.validators,e.messageBox)).critical||(t.critical=!1),e.relaxed||(t.relaxed=!1))}),t.critical)if(!t.relaxed&&!r.dataset[k.warningAccepted]||r.dataset[k.showAlwaysModal]){var i,a,s;e.preventDefault(),E.utils&&E.utils.modal&&(i=S[e.submitter.dataset[k.modalText]],a=S[e.submitter.dataset[k.modalSubmit]],s=S[e.submitter.dataset[k.modalCancel]],E.utils.modal.show(i,a,s,r))}else{if(!u)return;u.style.display=n.loaderVisible}else e.preventDefault(),E.utils&&E.utils.errorList&&E.utils.errorList.update(r);w.querySelectorAll(L.enableDisabledElements).forEach(function(e){e.disabled=0})}})}),u=w.getElementById(t.loader))}(this,this.OAP||{}),function(e,s){const t=e.document,r=s.labels||{},i={modalLinks:".modal__link"},n={modalText:"oapModaltext",modalSubmit:"oapModalsubmit",modalCancel:"oapModalcancel",warningAccepted:"warningAccepted"};t.querySelectorAll(i.modalLinks).forEach(function(a){a.addEventListener("click",function(e){var t,i;a.dataset[n.warningAccepted]||(e.preventDefault(),s.utils&&s.utils.modal&&(t=r[a.dataset[n.modalText]],i=r[a.dataset[n.modalSubmit]],e=r[a.dataset[n.modalCancel]],s.utils.modal.show(t,i,e,a)))})})}(this,this.OAP||{}),function(e){const t=e.document,s={dateFormFields:"[data-oap-datepicker]",dateRangeFields:"[data-oap-daterangepicker]",datePickerIcon:".form__icon--datepicker"},r={datePicker:"oapDatepicker",dateRangePicker:"oapDaterangepicker"};t.querySelectorAll(s.dateFormFields).forEach(function(e){var t=e.dataset[r.datePicker],t=JSON.parse(t);let i=new Datepicker(e,t),a=e.parentElement.querySelector(s.datePickerIcon);a&&a.addEventListener("click",function(){i.show()})}),t.querySelectorAll(s.dateRangeFields).forEach(function(e){var t=e.dataset[r.dateRangePicker],t=JSON.parse(t);let i=new DateRangePicker(e,t);i.datepickers.forEach(function(e){let t=e.element.parentElement.querySelector(s.datePickerIcon);t&&t.addEventListener("click",function(){e.show()})})})}(this),function(e){function t(e){var t=e.select.dataset[s.maxvalue];e.select.querySelectorAll("[selected]").length>=t?(e.add_button.disabled=!0,e.availableList.classList.add(r.disabled)):(e.add_button.disabled=!1,e.availableList.classList.remove(r.disabled))}const i=e.document,a={duallistboxFields:"[data-oap-duallistbox]"},s={dualListBox:"oapDuallistbox",maxvalue:"oapMaxvalue"},r={removedField:"dual-listbox__removed",disabled:"js-disabled"},n=function(e){e.addEventListener("added",function(){t(e)}),e.addEventListener("removed",function(){t(e)}),t(e)};i.querySelectorAll(a.duallistboxFields).forEach(function(e){!function(e){var t=e.dataset[s.dualListBox],t=JSON.parse(t);let i=new DualListbox(e,t);i.search_left.setAttribute("type","text"),i.search_right.setAttribute("type","text"),i.search_right.classList.add(r.removedField),i.add_all_button.remove(),i.remove_all_button.remove(),e.disabled&&(i.add_button.disabled=!0,i.remove_button.disabled=!0,i.availableList.classList.add(r.disabled),i.selectedList.classList.add(r.disabled)),e.dataset[s.maxvalue]&&n(i)}(e)})}(this),function(e,t){function E(e,t=0){if(0===e)return"0 Bytes";var i=t<0?0:t,t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(i))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}const w=e.document,L=t.labels||{},D={base:"/index.php?",taskInfo:"oap-ajax-task=info",taskUpload:"oap-ajax-task=upload"},k={removeItemButton:"form__upload-btn-remove-file",downloadItemButton:"form__upload-btn-download-file"},S={uploadElement:"[data-oap-upload]",addButton:".form__add-file-button",uploadButton:".form__upload-file-button",clearStageButton:".form__upload-file-clear-button",removeItemButton:"."+k.removeItemButton,uploadList:".form__upload-list",uploadValue:".form__upload-value",fileList:".form__upload-fileslist",uploadMsg:".form__upload-msgbox",preUpload:".form__pre-upload",fileElement:'[type="file"]',form:'[name="proposal"]',fileListItem:".form__upload-filesitem",fileListStaged:".form__upload-staged",fileListStagedLabel:".form__upload-staged-label",errorList:".error-message"},x={upload:"oapUpload",savedFiles:"oapSavedfiles",propertyKey:"oapPropertykey",proposal:"oapProposal",uploadResult:"oapUploadvalidation"},A={listStart:'<ul class="form__upload-fileslist">',listEnd:"</ul>",listItemStart:'<li class="form__upload-filesitem">',listItemEnd:"</li>",messageOkStart:'<span class="form__upload-message form__upload-message--ok">',messageKoStart:'<span class="form__upload-message form__upload-message--error">',messageEnd:"</span>",listBtnDelete:'<svg class="form__icon form__icon--delete" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-delete" x="0" y="0"></use></svg>',listBtnDownload:'<svg class="form__icon form__icon--download" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-download" x="0" y="0"></use></svg>',errorSVG:'<svg class="form__icon form__icon--error" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-error" x="0" y="0"></use></svg>',stagedFile:'<svg class="form__icon form__icon--uploaded" width="18" height="18" focusable="false" aria-hidden="true"><use xlink:href="/_assets/d867b284b013b280ddc9dda86ad2fa21/Icons/sprite.svg#icon-file-uploaded" x="0" y="0"></use></svg>'};w.querySelectorAll(S.uploadElement).forEach(function(r){var e=r.dataset[x.upload];const n=parseInt(JSON.parse(e).maxFiles),s=parseInt(JSON.parse(e).maxSize),o=r.querySelector(S.fileElement),t=r.querySelector(S.uploadList),i=r.querySelector(S.errorList),l=r.querySelector(S.preUpload),d=r.querySelector(S.uploadMsg),c=r.querySelector(S.fileListStaged),u=r.querySelector(S.fileListStagedLabel),h=r.querySelector(S.uploadValue),f=r.querySelector(S.addButton),p=r.querySelector(S.uploadButton);let m=new FormData,b=[];function v(t){b.length=0;let i=h.value.split(",");for(let e=0;e<i.length;e++)i[e]===t.value&&(i.splice(e,1),e-=1);h.value=i.join(","),i.length<n&&(f.style.display="block"),t.closest(S.fileListItem).remove(),b.push({text:A.messageOkStart+L.JSMSG_UPLOAD_FILE_REMOVED+A.messageEnd,error:0}),_()}function g(){o.value="",l.style.display="none",t&&(t.innerHTML=""),b.length=0,i&&(i.innerHTML=""),h.removeAttribute("aria-invalid"),h.dataset[x.uploadResult]="",y(),_()}const y=function(){var e=function(e){let t=e.value.split(",").length;return""===e.value&&(t=0),t}(h);f.hasAttribute("disabled")&&f.removeAttribute("disabled"),o.files.length+e>n&&(h.dataset[x.uploadResult]="max",h.setAttribute("aria-invalid","true"),b.push({text:A.messageKoStart+L.JSMSG_UPLOAD_ERROR_TOO_MANY_FILES+A.messageEnd,error:1})),o.files.length+e>n&&f.setAttribute("disabled","disabled")},_=function(){if(d.innerHTML="",p.hasAttribute("disabled")&&p.removeAttribute("disabled"),0<b.length){let t="<ul>";for(let e=0;e<b.length;e++)t+="<li>"+b[e].text+"</li>",1!==b[e].error||p.hasAttribute("disabled")||p.setAttribute("disabled","disabled");t+="</ul>",d.innerHTML=t,b.length=0}};r.querySelectorAll(S.removeItemButton).forEach(function(e){e.addEventListener("click",function(){v(e,h),y()})}),r.querySelector(S.clearStageButton).addEventListener("click",function(){g()}),f.addEventListener("click",function(){o.click()},!1),o.addEventListener("change",function(){let i=A.listStart,a="";d.innerHTML="";for(let e=0,t=o.files;e<o.files.length;e++)m.append("file-"+[...m.keys()].length,t[e],t[e].name),t[e].size>s&&(a=A.messageKoStart+A.errorSVG+A.messageEnd,o.dataset[x.uploadResult]="size",h.hasAttribute("aria-invalid")||h.setAttribute("aria-invalid","true"),b.push({text:A.messageKoStart+A.errorSVG+" "+L.JSMSG_UPLOAD_ERROR_FILE_SIZE.replace("%1",E(s))+A.messageEnd,error:1}),p.setAttribute("disabled","disabled")),i+=A.listItemStart+a+" "+t[e].name+" ("+E(t[e].size)+") "+A.listItemEnd;i+=A.listEnd,t.innerHTML=i,l.style.display="block",y(),_()}),p.addEventListener("click",function(){var i=o.files.length;if(d.innerHTML="",0<i){p.hasAttribute("disabled")||p.setAttribute("disabled","disabled");var a=r.closest(S.form).dataset[x.proposal],s=r.dataset[x.propertyKey];let t=new FormData;for(let e=0;e<i;e++)t.append("files[]",o.files[e]);let e=new XMLHttpRequest;s=D.base+D.taskUpload+"&proposal="+a+"&answer="+s;e.open("POST",s,!0),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var a=JSON.parse(this.responseText);g();for(let t=0,i=a.data.files;t<a.data.files.length;t++){let e=w.createElement("li");e.setAttribute("class","form__upload-filesitem");var s=function(e,t,i){let a=w.createElement("button");return a.setAttribute("value",e[t].uid),a.setAttribute("class",k.removeItemButton),a.setAttribute("type","button"),a.setAttribute("title","Remove file"),a.innerHTML=A.listBtnDelete,a.addEventListener("click",function(){i(a,a.value)}),a}(i,t,v),r=function(e,t){let i=w.createElement("a");return i.setAttribute("href",e[t].url),i.setAttribute("target","_blank"),i.setAttribute("class",k.downloadItemButton),i.innerHTML=A.listBtnDownload,i}(i,t);e.innerHTML=A.stagedFile+" "+i[t].name+" ("+E(i[t].size)+")",e.append(s),e.append(r),c.style.display="block",u.style.display="block",c.appendChild(e)}b.push({text:A.messageOkStart+L.JSMSG_UPLOAD_UPLOADED+A.messageEnd,error:0});let e=h.value.split(",");""===h.value&&(e.length=0);let t=[...e,...a.data.ids];t.length>=n&&(h.setAttribute("aria-invalid","false"),f.style.display="none",b.push({text:L.JSMSG_UPLOAD_MAX_FILES_REACHED,error:0}));var i=t.join(",");h.setAttribute("value",i),_()}p.hasAttribute("disabled")&&p.removeAttribute("disabled")},e.send(t)}}),y()})}(this,this.OAP||{}),function(e){const t=e.document,s={checkableGroupWithAdditionalValue:".form__checkable-group--additionalvalue",checkableItem:".form__checkable-label input.form__checkable",additionalInput:{textfield:".form__textfield",textarea:".form__textarea"}};t.querySelectorAll(s.checkableGroupWithAdditionalValue).forEach(function(e){let t=e.querySelector(s.additionalInput.textfield+","+s.additionalInput.textarea),i=e.querySelectorAll(s.checkableItem),a=i[i.length-1];t.disabled=!a.checked,"radio"===a.type&&i.forEach(function(e){e.addEventListener("change",function(){t.disabled=!a.checked})}),"checkbox"===a.type&&a.addEventListener("change",function(){t.disabled=!a.checked})})}(this),function(e,t){const i=e.document,a={formattingField:".form__textfield--number"};i.querySelectorAll(a.formattingField).forEach(function(e){e.addEventListener("blur",function(){var e;""!==this.value.toString().trim()&&t.utils&&t.utils.formatNumber&&(e=this.value.toString().replace(/\./g,"").replace(/,/g,"."),this.value=t.utils.formatNumber.format(e))})})}(this,this.OAP||{});